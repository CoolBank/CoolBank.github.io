<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Signing Data | Coinhub Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#22a079">
    <meta name="description" content="Developer documentation for the Coinhub wallet">
    <meta name="theme-color" content="#22a079">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.6e8d0c80.css" as="style"><link rel="preload" href="/assets/js/app.fe6758e3.js" as="script"><link rel="preload" href="/assets/js/3.53cdf4ac.js" as="script"><link rel="preload" href="/assets/js/12.dd873085.js" as="script"><link rel="preload" href="/assets/js/4.b32304d3.js" as="script"><link rel="prefetch" href="/assets/js/10.7c370795.js"><link rel="prefetch" href="/assets/js/11.5ba472e9.js"><link rel="prefetch" href="/assets/js/13.7a4778fd.js"><link rel="prefetch" href="/assets/js/14.5eea41a6.js"><link rel="prefetch" href="/assets/js/15.c9f48ac1.js"><link rel="prefetch" href="/assets/js/16.cb06a49f.js"><link rel="prefetch" href="/assets/js/17.efd30d2f.js"><link rel="prefetch" href="/assets/js/5.2e6de3e7.js"><link rel="prefetch" href="/assets/js/6.0ef70ff6.js"><link rel="prefetch" href="/assets/js/7.69eefd97.js"><link rel="prefetch" href="/assets/js/8.9376cdbb.js"><link rel="prefetch" href="/assets/js/9.0fd89356.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.46848a98.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6e8d0c80.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><img src="/favicon.ico" alt="Coinhub Docs" class="logo"> <span class="site-name can-hide">Coinhub Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/signing-data.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/signing-data.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/CoolBank/CoolBank.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/signing-data.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/signing-data.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/CoolBank/CoolBank.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/" aria-current="page" class="sidebar-link">Introduction</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Connect to wallet</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/base.html" class="sidebar-link">Inject object</a></li><li><a href="/en/rpc-api.html" class="sidebar-link">RPC API</a></li><li><a href="/en/signing-data.html" aria-current="page" class="active sidebar-link">Signing Data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/signing-data.html#a-brief-history" class="sidebar-link">A Brief History</a></li><li class="sidebar-sub-header"><a href="/en/signing-data.html#sign-typed-data-v1" class="sidebar-link">Sign Typed Data v1</a></li><li class="sidebar-sub-header"><a href="/en/signing-data.html#sign-typed-data-v3" class="sidebar-link">Sign Typed Data v3</a></li><li class="sidebar-sub-header"><a href="/en/signing-data.html#sign-typed-data-v4" class="sidebar-link">Sign Typed Data v4</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="signing-data"><a href="#signing-data" class="header-anchor">#</a> Signing Data</h1> <p>Since Coinhub App makes cryptographic keys available to each user, websites can use these signatures for a variety of uses. Here are a few guides related to specific use cases:</p> <ul><li><a href="https://medium.com/hackernoon/writing-for-blockchain-wallet-signature-request-messages-6ede721160d5" target="_blank" rel="noopener noreferrer">Authenticating websites<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="a-brief-history"><a href="#a-brief-history" class="header-anchor">#</a> A Brief History</h2> <p>There are currently six signing methods in Coinhub App, and you might wonder the history of these methods. Studying the history of these methods has some lessons in it for the emergent lessons of decentralized standards emergence. Our current five methods are:</p> <ul><li><code>eth_sign</code></li> <li><code>personal_sign</code></li> <li><code>signTypedData</code> (currently identical to <code>signTypedData_v1</code>)</li> <li><code>signTypedData_v1</code></li> <li><code>signTypedData_v3</code></li> <li><code>signTypedData_v4</code></li></ul> <p>There are likely to be many more over time. When Coinhub App first started, the Provider API wasn’t designed to be exposed to untrusted websites, and so some considerations weren’t taken as seriously as they were later.</p> <p>In particular, the method <code>eth_sign</code> is an open-ended signing method that allows signing an arbitrary hash, which means it can be used to sign transactions, or any other data, making it a dangerous phishing risk.</p> <p>For this reason, we make this method show the most frightening possible message to the user, and generally discourage using this method in production. However, some applications (usually admin panels internal to teams) use this method for the sake of its ease of use, and so we have continued to support it for the sake of not breaking the workflows of active projects.</p> <p>Eventually, the <code>personal_sign</code> <a href="https://github.com/ethereum/go-ethereum/pull/2940" target="_blank" rel="noopener noreferrer">spec<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> was proposed, which added a prefix to the data so it could not impersonate transactions. We also made this method able to display human readable text when UTF-8 encoded, making it a popular choice for site logins.</p> <p>However, the text-prefix made those signatures expensive to verify on-chain, and so with the help of the <a href="https://0x.org/" target="_blank" rel="noopener noreferrer">0xProtocol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> team and <a href="https://spankchain.com/" target="_blank" rel="noopener noreferrer">SpankChain<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, the <a href="https://eips.ethereum.org/EIPS/eip-712" target="_blank" rel="noopener noreferrer">EIP-712<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> spec was written.</p> <p>The strange part of EIP-712, and this decentralized standards ecosystem, is that the proposal changed several times while retaining the same EIP. This means what we initially implemented as <code>signTypedData</code> was the earliest proposed version, while other groups implemented later versions under the same method name.</p> <p>To avoid compatibility issues between clients, we recommend using the hard-versioned method names <code>signTypedData_v1</code> and <code>signTypedData_v3</code>. The missing <code>v2</code> represents an intermediary design that was implemented by the Cipher browser, so that we have room to implement it if there is ever enough developer demand for it.</p> <p>In the future, it may help to have method names include a hash of their exact proposal, since in a decentralized ecosystem, there is no absolute source of truth of what a given name should map to. Instead, we are forced to invent new patterns of collaboration, where we can drive forward and innovate, while simultaneously avoiding creating a brittle ecosystem by changing our meanings out from under the words.</p> <p>I hope this has been a useful introduction to the history of our signing methods!</p> <h2 id="sign-typed-data-v1"><a href="#sign-typed-data-v1" class="header-anchor">#</a> Sign Typed Data v1</h2> <p>This early version of the spec lacked some later security improvements, and should generally be neglected in favor of <a href="#sign-typed-data-v3">signTypedData_v3</a>.</p> <p>The <code>signTypedData</code> family has a few major design considerations:</p> <ul><li>Cheap to verify on chain</li> <li>Still somewhat human readable</li> <li>Hard to phish signatures</li></ul> <p>If on-chain verifiability cost is a high priority for you, you might want to consider it.</p> <h2 id="sign-typed-data-v3"><a href="#sign-typed-data-v3" class="header-anchor">#</a> Sign Typed Data v3</h2> <p>The method <code>signTypedData_v3</code> currently represents the latest version of the <a href="https://eips.ethereum.org/EIPS/eip-712" target="_blank" rel="noopener noreferrer">EIP-712 spec<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, making it the most secure method for signing cheap-to-verify data on-chain that we have yet.</p> <p>This does not mean it is perfect, and we do already have a <code>v4</code> in prototype stage (which supports recursive structs and arrays), but we do intend to protect this namespace and keep it compatible going forwards.</p> <p>Hopefully soon we will also have good examples for parsing method input into structs for verification on-chain (great contribution opportunity!)</p> <h2 id="sign-typed-data-v4"><a href="#sign-typed-data-v4" class="header-anchor">#</a> Sign Typed Data v4</h2> <p>The method <code>signTypedData_v4</code> currently represents the latest version of the <a href="https://eips.ethereum.org/EIPS/eip-712" target="_blank" rel="noopener noreferrer">EIP-712 spec<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, with added support for arrays and with a breaking fix for the way structs are encoded.</p> <p>This does not mean it is perfect, and does not mean we will not eventually have a <code>v5</code>, but we do intend to protect this namespace and keep it compatible going forwards.</p> <p>Hopefully soon we will also have good examples for parsing method input into structs for verification on-chain (great contribution opportunity!)</p> <h3 id="sign-typed-data-message-parameters"><a href="#sign-typed-data-message-parameters" class="header-anchor">#</a> Sign Typed Data Message Parameters</h3> <p><code>domain</code>: The Domain or domain signature is important because it:</p> <ul><li>Will only be accepted for a specific website/contract.</li> <li>Makes sure signatures are valid only where they are intended to be valid.</li> <li>Allows you have a unique contract that verifies the address.</li> <li>This is a bunch of information that restricts where the signature is valid.</li> <li>This is the domain of validity. Could be a contract, a url, ect.</li> <li>What needs to be put in here specifically what the DApp tells you.</li> <li>Makes sure your signature(s) don't collide with other signatures.</li></ul> <p><code>chainId</code>: The chainId tell you what chain you're on and this is important because:</p> <ul><li>It makes sure signatures signed on Rinkeby are not valid on another chain, such as the Ethereum Main Net.</li></ul> <p><code>name</code>: This is primarily for UX(User Experience) purposes.</p> <ul><li>For example, as a user, you're using an Ether Mail app and a dialog comes up for cryptokitties exchange, this would arouse suspicion due to what the name is on the signature.</li></ul> <p><code>verifyingContract</code>: This is an extra layer of assurance. Even if two developers end up creating an app with the same name, they will never have the same contract address.(You can add another field <code>salt</code> but it's complete overkill and unnecessary)</p> <ul><li>If you are unsure of the name this will show the contract responsible for message verification.</li> <li>This field will also take a url.</li></ul> <p><code>version</code>: This tell you the current version of the domain object.</p> <p><code>message</code>: Completely open to what you would like the structure of it to be. Every field is optional.</p> <p>Below is an example of signing typed data with Coinhub App. Reference <a href="https://github.com/danfinlay/js-eth-personal-sign-examples" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="example"><a href="#example" class="header-anchor">#</a> Example</h3> <p>::::tabs :options=&quot;{ useUrlFragment: false }&quot;</p> <p>:::tab HTML</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Sign Typed Data V4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>signTypedDataV4Button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>sign typed data v4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>:::</p> <p>:::tab JavaScript</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>signTypedDataV4Button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> msgParams <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    domain<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// Defining the chain aka Rinkeby testnet or Ethereum Main Net</span>
      chainId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token comment">// Give a user friendly name to the specific contract you are signing for.</span>
      name<span class="token operator">:</span> <span class="token string">'Ether Mail'</span><span class="token punctuation">,</span>
      <span class="token comment">// If name isn't enough add verifying contract to make sure you are establishing contracts with the proper entity</span>
      verifyingContract<span class="token operator">:</span> <span class="token string">'0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC'</span><span class="token punctuation">,</span>
      <span class="token comment">// Just let's you know the latest version. Definitely make sure the field name is correct.</span>
      version<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Defining the message signing data content.</span>
    message<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">/*
       - Anything you want. Just a JSON Blob that encodes the data you want to send
       - No required fields
       - This is DApp Specific
       - Be as explicit as possible when building out the message schema.
      */</span>
      contents<span class="token operator">:</span> <span class="token string">'Hello, Bob!'</span><span class="token punctuation">,</span>
      attachedMoneyInEth<span class="token operator">:</span> <span class="token number">4.2</span><span class="token punctuation">,</span>
      from<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'Cow'</span><span class="token punctuation">,</span>
        wallets<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826'</span><span class="token punctuation">,</span>
          <span class="token string">'0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      to<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span>
          wallets<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">'0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB'</span><span class="token punctuation">,</span>
            <span class="token string">'0xB0BdaBea57B0BDABeA57b0bdABEA57b0BDabEa57'</span><span class="token punctuation">,</span>
            <span class="token string">'0xB0B0b0b0b0b0B000000000000000000000000000'</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Refers to the keys of the *types* object below.</span>
    primaryType<span class="token operator">:</span> <span class="token string">'Mail'</span><span class="token punctuation">,</span>
    types<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// TODO: Clarify if EIP712Domain refers to the domain the contract is hosted on</span>
      EIP712Domain<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'string'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'version'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'string'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'chainId'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'uint256'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'verifyingContract'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'address'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// Not an EIP712Domain definition</span>
      Group<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'string'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'members'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'Person[]'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// Refer to PrimaryType</span>
      Mail<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'from'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'Person'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'to'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'Person[]'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'contents'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'string'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// Not an EIP712Domain definition</span>
      Person<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'string'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'wallets'</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">'address[]'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> from <span class="token operator">=</span> web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span>accounts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token punctuation">[</span>from<span class="token punctuation">,</span> msgParams<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> method <span class="token operator">=</span> <span class="token string">'eth_signTypedData_v4'</span><span class="token punctuation">;</span>
  web3<span class="token punctuation">.</span>currentProvider<span class="token punctuation">.</span><span class="token function">sendAsync</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      method<span class="token punctuation">,</span>
      params<span class="token punctuation">,</span>
      from<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'ERROR'</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'TYPED SIGNED:'</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> recovered <span class="token operator">=</span> sigUtil<span class="token punctuation">.</span><span class="token function">recoverTypedSignature_v4</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        data<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>msgParams<span class="token punctuation">)</span><span class="token punctuation">,</span>
        sig<span class="token operator">:</span> result<span class="token punctuation">.</span>result<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        ethUtil<span class="token punctuation">.</span><span class="token function">toChecksumAddress</span><span class="token punctuation">(</span>recovered<span class="token punctuation">)</span> <span class="token operator">===</span> ethUtil<span class="token punctuation">.</span><span class="token function">toChecksumAddress</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Successfully recovered signer as '</span> <span class="token operator">+</span> from<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>
          <span class="token string">'Failed to verify signer when comparing '</span> <span class="token operator">+</span> result <span class="token operator">+</span> <span class="token string">' to '</span> <span class="token operator">+</span> from
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/CoolBank/CoolBank.github.io/edit/master/packages/docs/dist/en/signing-data.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/rpc-api.html" class="prev">
        RPC API
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.fe6758e3.js" defer></script><script src="/assets/js/3.53cdf4ac.js" defer></script><script src="/assets/js/12.dd873085.js" defer></script><script src="/assets/js/4.b32304d3.js" defer></script>
  </body>
</html>
